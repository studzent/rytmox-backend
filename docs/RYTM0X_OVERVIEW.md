# RYTM0X - Обзор проекта

## Описание проекта

RYTM0X — это AI-ассистент по фитнесу для рынка СНГ, предоставляющий персональные тренировки, рекомендации по питанию и анализ прогресса через несколько платформ.

### Основные платформы

- **Мобильное приложение**: iOS/Android (кросс-платформа, в разработке)
- **Telegram-бот**: интеграция для быстрого доступа к тренировкам (в разработке)
- **Веб/лендинг**: сайт rytmox.ai для информации и регистрации
- **Backend API**: Node.js + Express, обслуживающий все клиентские приложения

## Цели проекта

### Персональные тренировки
- Генерация тренировок на основе целей пользователя, уровня подготовки и доступного оборудования
- Адаптация программ под индивидуальные потребности
- Форм-чек упражнений с помощью AI

### AI-питание
- Базовые рекомендации по питанию
- Интеграция с тренировочными целями
- Без жёсткого медицинского/нутриционистского уклона (базовые советы)

### Анализ прогресса и мотивация
- Отслеживание выполненных тренировок
- Статистика и аналитика прогресса
- Мотивационные элементы (в будущем)

## Архитектура

### Backend
- **Стек**: Node.js + Express
- **База данных**: Supabase (PostgreSQL)
- **AI**: OpenAI API для генерации тренировок, питания и форм-чека
- **Аутентификация**: через Supabase Auth (в будущем) или собственная реализация

### База данных (Supabase)

Централизованная база данных со следующими основными таблицами:

- `users` — пользователи системы
- `exercises` — каталог упражнений
- `workouts` — тренировки пользователей
- `workout_exercises` — связь тренировок и упражнений (детали выполнения)
- `ai_logs` — логи всех AI-запросов для анализа и улучшения

Подробная структура описана в [DB_SCHEMA.md](./DB_SCHEMA.md).

### Клиентские приложения

Все клиенты работают через единый REST API backend:

1. **Мобильное приложение RYTM0X** (будущее)
   - Кросс-платформа (React Native / Flutter)
   - Полный функционал: тренировки, прогресс, профиль

2. **Telegram-бот** (будущее)
   - Быстрый доступ к тренировкам
   - Уведомления и напоминания
   - Минималистичный интерфейс

3. **Лендинг rytmox.ai**
   - Информация о продукте
   - Регистрация и вход
   - Статический сайт

## Основные модули backend

### `/user`
- Регистрация и аутентификация
- Управление профилем пользователя
- Получение данных пользователя

### `/ai`
- Генерация тренировок (workout)
- Рекомендации по питанию (nutrition)
- Форм-чек упражнений (form_check)
- Логирование всех AI-запросов

### Будущие модули
- `/progress` — статистика и прогресс
- `/notifications` — уведомления
- `/social` — социальные функции (если понадобятся)

## Принципы разработки

### Архитектурные принципы

1. **Тонкие клиенты**
   - Вся бизнес-логика хранится в backend
   - Клиенты максимально тонкие, только UI и API-вызовы
   - Никакой дублирующей логики на клиентах

2. **Централизованная база данных**
   - Вся БД в Supabase, никакого дублирования
   - Telegram и мобильное приложение ходят только через API
   - Единый источник истины для всех данных

3. **Неразрушающие изменения схемы**
   - Таблицы нельзя ломать, только аккуратно расширять
   - Новые поля добавляются, старые не удаляются без миграции
   - Все изменения схемы должны быть отражены в `supabase/schema.sql` и `docs/DB_SCHEMA.md`

4. **Логирование AI**
   - Все запросы к AI логируются в `ai_logs`
   - Это позволяет анализировать использование и улучшать промпты

### Технические принципы

- **API-first подход**: все функции доступны через REST API
- **Модульность**: сервисы разделены по функциональности
- **Документированность**: важные решения фиксируются в docs/
- **Расширяемость**: архитектура позволяет легко добавлять новые функции

## Структура проекта

```
rytmox-backend/
├── controllers/     # Контроллеры для обработки запросов
├── services/        # Бизнес-логика (userService, aiService)
├── routes/          # Маршруты Express
├── middleware/      # Middleware для аутентификации и валидации
├── utils/           # Утилиты (Supabase client и т.д.)
├── supabase/        # SQL схемы и миграции
├── docs/            # Документация проекта
└── index.js         # Точка входа приложения
```

## Дополнительная документация

- [DB_SCHEMA.md](./DB_SCHEMA.md) — структура базы данных
- [EXERCISE_CATALOG_PLAN.md](./EXERCISE_CATALOG_PLAN.md) — стратегия каталога упражнений

